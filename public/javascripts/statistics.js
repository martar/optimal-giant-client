// Generated by CoffeeScript 1.3.3

/*
module for displaying real time statistics from the optimization algorithm
*/


(function() {
  var AverageFitnessPlugin, BestFitnessInPopulationPlugin, Stats, WorstFitnessInPopulationPlugin;

  AverageFitnessPlugin = (function() {

    function AverageFitnessPlugin() {}

    /*
    	Callback to called every time the new data arrives
    */


    AverageFitnessPlugin.prototype.feed = function(fitnessListInPopulation) {
      var ind, sum, _i, _len;
      sum = 0;
      for (_i = 0, _len = fitnessListInPopulation.length; _i < _len; _i++) {
        ind = fitnessListInPopulation[_i];
        sum += ind.skier.result;
      }
      return postMessage({
        type: "stats",
        plugin: "AverageFitness",
        value: sum / fitnessListInPopulation.length
      });
    };

    return AverageFitnessPlugin;

  })();

  BestFitnessInPopulationPlugin = (function() {

    function BestFitnessInPopulationPlugin() {}

    /*
    	Callback to called every time the new data arrives
    */


    BestFitnessInPopulationPlugin.prototype.feed = function(fitnessListInPopulation) {
      var ind, min, _i, _len;
      min = null;
      for (_i = 0, _len = fitnessListInPopulation.length; _i < _len; _i++) {
        ind = fitnessListInPopulation[_i];
        if (min === null || ind.skier.result < min) {
          min = ind.skier.result;
        }
      }
      return postMessage({
        type: "stats",
        plugin: "BestFitness",
        value: min
      });
    };

    return BestFitnessInPopulationPlugin;

  })();

  WorstFitnessInPopulationPlugin = (function() {

    function WorstFitnessInPopulationPlugin() {}

    /*
    	Callback to called every time the new data arrives
    */


    WorstFitnessInPopulationPlugin.prototype.feed = function(fitnessListInPopulation) {
      var ind, min, _i, _len;
      min = null;
      for (_i = 0, _len = fitnessListInPopulation.length; _i < _len; _i++) {
        ind = fitnessListInPopulation[_i];
        if (min === null || ind.skier.result > min) {
          min = ind.skier.result;
        }
      }
      return postMessage({
        type: "stats",
        plugin: "WorstFitness",
        value: min
      });
    };

    return WorstFitnessInPopulationPlugin;

  })();

  Stats = (function() {
    /*
    	configuration. Which stats plugins should be anabled
    */

    function Stats() {
      this.plugins = [new BestFitnessInPopulationPlugin(), new AverageFitnessPlugin(), new WorstFitnessInPopulationPlugin()];
    }

    /*
    	Callback to called every time the new data arrives
    */


    Stats.prototype.feed = function(fitnessListInPopulation) {
      var plugin, _i, _len, _ref, _results;
      _ref = this.plugins;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        plugin = _ref[_i];
        _results.push(plugin.feed(fitnessListInPopulation));
      }
      return _results;
    };

    return Stats;

  })();

  this.Stats = Stats;

}).call(this);
