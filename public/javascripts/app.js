(function(){"use strict";var e=typeof window!="undefined"?window:global;if(typeof e.require=="function")return;var t={},n={},r=function(e,t){return{}.hasOwnProperty.call(e,t)},i=function(e,t){var n=[],r,i;/^\.\.?(\/|$)/.test(t)?r=[e,t].join("/").split("/"):r=t.split("/");for(var s=0,o=r.length;s<o;s++)i=r[s],i===".."?n.pop():i!=="."&&i!==""&&n.push(i);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},o=function(t){return function(n){var r=s(t),o=i(r,n);return e.require(o)}},u=function(e,t){var r={id:e,exports:{}};t(r.exports,o(e),r);var i=n[e]=r.exports;return i},a=function(e){var s=i(e,".");if(r(n,s))return n[s];if(r(t,s))return u(s,t[s]);var o=i(s,"./index");if(r(n,o))return n[o];if(r(t,o))return u(o,t[o]);throw new Error('Cannot find module "'+e+'"')},f=function(e){for(var n in e)r(e,n)&&(t[n]=e[n])};e.require=a,e.require.define=f,e.require.brunch=!0})(),window.require.define({application:function(e,t,n){var r,i,s,o,u,a,f,l={}.hasOwnProperty,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("chaplin"),a=t("mediator"),f=t("routes"),u=t("controllers/session_controller"),s=t("controllers/header_controller"),o=t("views/layout"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.title="Brunch example application",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.initDispatcher(),this.initLayout(),this.initMediator(),this.initControllers(),this.initRouter(f),typeof Object.freeze=="function"?Object.freeze(this):void 0},t.prototype.initLayout=function(){return this.layout=new o({title:this.title})},t.prototype.initControllers=function(){return new u,new s},t.prototype.initMediator=function(){return a.user=null,a.seal()},t}(i.Application)}}),window.require.define({"controllers/base/controller":function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("chaplin"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t}(r.Controller)}}),window.require.define({"controllers/header_controller":function(e,t,n){var r,i,s,o,u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("controllers/base/controller"),i=t("models/header"),o=t("views/header_view"),n.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.model=new i,this.view=new o({model:this.model})},t}(r)}}),window.require.define({"controllers/home_controller":function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("controllers/base/controller"),s=t("views/home_page_view"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.historyURL="home",t.prototype.index=function(){return this.view=new s},t}(r)}}),window.require.define({"controllers/session_controller":function(e,t,n){var r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}},f={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};u=t("mediator"),r=t("controllers/base/controller"),o=t("models/user"),i=t("views/login_view"),n.exports=s=function(e){function t(){return this.logout=a(this.logout,this),this.serviceProviderSession=a(this.serviceProviderSession,this),this.triggerLogin=a(this.triggerLogin,this),t.__super__.constructor.apply(this,arguments)}return l(t,e),t.serviceProviders={},t.prototype.loginStatusDetermined=!1,t.prototype.loginView=null,t.prototype.serviceProviderName=null,t.prototype.initialize=function(){return this.subscribeEvent("serviceProviderSession",this.serviceProviderSession),this.subscribeEvent("logout",this.logout),this.subscribeEvent("userData",this.userData),this.subscribeEvent("!showLogin",this.showLoginView),this.subscribeEvent("!login",this.triggerLogin),this.subscribeEvent("!logout",this.triggerLogout),this.getSession()},t.prototype.loadServiceProviders=function(){var e,n,r,i;r=t.serviceProviders,i=[];for(e in r)n=r[e],i.push(n.load());return i},t.prototype.createUser=function(e){return u.user=new o(e)},t.prototype.getSession=function(){var e,n,r,i;this.loadServiceProviders(),r=t.serviceProviders,i=[];for(e in r)n=r[e],i.push(n.done(n.getLoginStatus));return i},t.prototype.showLoginView=function(){if(this.loginView)return;return this.loadServiceProviders(),this.loginView=new i({serviceProviders:t.serviceProviders})},t.prototype.triggerLogin=function(e){var n;n=t.serviceProviders[e];if(!n.isLoaded()){this.publishEvent("serviceProviderMissing",e);return}return this.publishEvent("loginAttempt",e),n.triggerLogin()},t.prototype.serviceProviderSession=function(e){return this.serviceProviderName=e.provider.name,this.disposeLoginView(),e.id=e.userId,delete e.userId,this.createUser(e),this.publishLogin()},t.prototype.publishLogin=function(){return this.loginStatusDetermined=!0,this.publishEvent("login",u.user),this.publishEvent("loginStatus",!0)},t.prototype.triggerLogout=function(){return this.publishEvent("logout")},t.prototype.logout=function(){return this.loginStatusDetermined=!0,this.disposeUser(),this.serviceProviderName=null,this.showLoginView(),this.publishEvent("loginStatus",!1)},t.prototype.userData=function(e){return u.user.set(e)},t.prototype.disposeLoginView=function(){if(!this.loginView)return;return this.loginView.dispose(),this.loginView=null},t.prototype.disposeUser=function(){if(!u.user)return;return u.user.dispose(),u.user=null},t}(r)}}),window.require.define({initialize:function(e,t,n){var r;r=t("application"),$(document).on("ready",function(){var e;return e=new r,e.initialize()})}}),window.require.define({"lib/services/service_provider":function(e,t,n){var r,i,s;s=t("lib/utils"),r=t("chaplin"),n.exports=i=function(){function e(){_(this).extend($.Deferred()),s.deferMethods({deferred:this,methods:["triggerLogin","getLoginStatus"],onDeferral:this.load})}return _(e.prototype).extend(r.EventBroker),e.prototype.loading=!1,e.prototype.disposed=!1,e.prototype.dispose=function(){if(this.disposed)return;return this.unsubscribeAllEvents(),this.disposed=!0,typeof Object.freeze=="function"?Object.freeze(this):void 0},e}()}}),window.require.define({"lib/support":function(e,t,n){var r,i,s;r=t("chaplin"),s=t("lib/utils"),i=s.beget(r.support),n.exports=i}}),window.require.define({"lib/utils":function(e,t,n){var r,i,s={}.hasOwnProperty;r=t("chaplin"),i=r.utils.beget(r.utils),_(i).extend({deferMethods:function(e){var t,n,r,o,u,a,f,l,c,h,p;t=e.deferred,o=e.methods,r=e.host||t,l=e.target||r,f=e.onDeferral,u={};if(typeof o=="string")u[o]=r[o];else if(o.length&&o[0])for(c=0,h=o.length;c<h;c++){a=o[c],n=r[a];if(typeof n!="function")throw new TypeError("utils.deferMethods: method "+a+" notfound on host "+r);u[a]=n}else u=o;p=[];for(a in u){if(!s.call(u,a))continue;n=u[a];if(typeof n!="function")continue;p.push(l[a]=i.createDeferredFunction(t,n,l,f))}return p},createDeferredFunction:function(e,t,n,r){return n==null&&(n=e),function(){var i;i=arguments;if(e.state()==="resolved")return t.apply(n,i);e.done(function(){return t.apply(n,i)});if(typeof r=="function")return r.apply(n)}}}),n.exports=i}}),window.require.define({"lib/view_helper":function(e,t,n){var r,i;r=t("mediator"),i=t("chaplin/lib/utils"),Handlebars.registerHelper("if_logged_in",function(e){return r.user?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("with",function(e,t){return!e||Handlebars.Utils.isEmpty(e)?t.inverse(this):t.fn(e)}),Handlebars.registerHelper("without",function(e,t){var n;return n=t.inverse,t.inverse=t.fn,t.fn=n,Handlebars.helpers["with"].call(this,e,t)}),Handlebars.registerHelper("with_user",function(e){var t;return t=r.user||{},Handlebars.helpers["with"].call(this,t,e)})}}),window.require.define({mediator:function(e,t,n){n.exports=t("chaplin").mediator}}),window.require.define({"models/base/collection":function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("chaplin"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t}(r.Collection)}}),window.require.define({"models/base/model":function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("chaplin"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t}(r.Model)}}),window.require.define({"models/header":function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("models/base/model"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.defaults={items:[{href:"./test/",title:"App Tests"},{href:"https://github.com/martar/optimal-gigant",title:"Repo"}]},t}(i)}}),window.require.define({"models/user":function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/model"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t}(r)}}),window.require.define({routes:function(e,t,n){n.exports=function(e){return e("","home#index")}}}),window.require.define({"views/base/collection_view":function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("chaplin"),s=t("views/base/view"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.getTemplateFunction=s.prototype.getTemplateFunction,t}(r.CollectionView)}}),window.require.define({"views/base/page_view":function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("views/base/view"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.container="#page-container",t.prototype.autoRender=!0,t.prototype.renderedSubviews=!1,t.prototype.initialize=function(){var e,n=this;t.__super__.initialize.apply(this,arguments);if(this.model||this.collection)return e=!1,this.modelBind("change",function(){return e||n.render(),e=!0})},t.prototype.renderSubviews=function(){},t.prototype.render=function(){t.__super__.render.apply(this,arguments);if(!this.renderedSubviews)return this.renderSubviews(),this.renderedSubviews=!0},t}(i)}}),window.require.define({"views/base/view":function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("chaplin"),t("lib/view_helper"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.getTemplateFunction=function(){return this.template},t}(r.View)}}),window.require.define({"views/header_view":function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("views/base/view"),s=t("views/templates/header"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.template=s,t.prototype.id="header",t.prototype.className="header",t.prototype.container="#header-container",t.prototype.autoRender=!0,t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.subscribeEvent("loginStatus",this.render),this.subscribeEvent("startupController",this.render)},t}(i)}}),window.require.define({"views/home_page_view":function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=t("views/templates/home"),i=t("views/base/page_view"),n.exports=r=function(e){function t(){return this.work=o(this.work,this),this.processStatistics=o(this.processStatistics,this),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.template=s,t.prototype.className="home-page",t.prototype.afterRender=function(){return t.__super__.afterRender.apply(this,arguments),this.canvas=this.$("#slope").get(0),this.context=this.canvas.getContext("2d"),this.worker=new Worker("javascripts/turnWorker.js"),this.avgFitness=[[]],this.bestFitness=[[]],this.worstFitness=[[]],this.work()},t.prototype.draw=function(e){var t,n,r,i,s,o,u,a,f,l,c,h;f=e.skiers,h=[];for(s=0,u=f.length;s<u;s++){n=f[s],(l=n.color)==null&&(n.color="black"),this.context.strokeStyle=n.color,this.context.beginPath(),this.context.moveTo(n.positions[0][0],n.positions[0][1]),c=n.positions.slice(0);for(o=0,a=c.length;o<a;o++)t=c[o],r=Math.round(t[0]*30+5),i=Math.round(t[1]*30+5),this.context.lineTo(r,i);this.context.closePath(),h.push(this.context.stroke())}return h},t.prototype.drawIntermediate=function(e){var t,n,r,i,s,o;this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.beginPath(),this.context.moveTo(e.best[0][0],e.best[0][1]),o=e.best.slice(0);for(i=0,s=o.length;i<s;i++)t=o[i],n=Math.round(t[0]*30+5),r=Math.round(t[1]*30+5),this.context.lineTo(n,r);return this.context.closePath(),this.context.stroke()},t.prototype.renderResults=function(e){var t,n,r,i,s,o;i=e.skiers,o=[];for(n=0,r=i.length;n<r;n++)t=i[n],(s=t.color)==null&&(t.color="black"),o.push(this.$("#results").append($("<li></li>").html(t.color+" "+t.time)));return o},t.prototype.processStatistics=function(e){var t;return e.plugin==="AverageFitness"?this.avgFitness.push([this.avgFitness.length,e.value]):e.plugin==="BestFitness"?this.bestFitness.push([this.bestFitness.length,e.value]):e.plugin==="WorstFitness"&&this.worstFitness.push([this.worstFitness.length,e.value]),t=$.jqplot("stats_plots",[this.avgFitness,this.bestFitness,this.worstFitness],{title:"Live alg stats: best, avg and worst fitness in population"}),t.redraw()},t.prototype.work=function(){var e=this;return this.worker.onmessage=function(t){return t.data.type==="final"?(e.draw(t.data),console.log(t.data),e.renderResults(t.data)):t.data.type==="intermediate"?(e.drawIntermediate(t.data),console.log(t.data)):t.data.type==="stats"?e.processStatistics(t.data):console.log(t.data)},this.worker.postMessage({})},t}(i)}}),window.require.define({"views/layout":function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("chaplin"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments)},t}(r.Layout)}}),window.require.define({"views/login_view":function(e,t,n){var r,i,s,o,u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("lib/utils"),i=t("views/base/view"),s=t("views/templates/login"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.template=s,t.prototype.id="login",t.prototype.container="#content-container",t.prototype.autoRender=!0,t.prototype.initialize=function(e){return t.__super__.initialize.apply(this,arguments),this.initButtons(e.serviceProviders)},t.prototype.initButtons=function(e){var t,n,r,i,s,o,u;u=[];for(o in e)s=e[o],t="."+o,this.$(t).addClass("service-loading"),i=_(this.loginWith).bind(this,o,s),this.delegate("click",t,i),r=_(this.serviceProviderLoaded).bind(this,o,s),s.done(r),n=_(this.serviceProviderFailed).bind(this,o,s),u.push(s.fail(n));return u},t.prototype.loginWith=function(e,t,n){n.preventDefault();if(!t.isLoaded())return;return this.publishEvent("login:pickService",e),this.publishEvent("!login",e)},t.prototype.serviceProviderLoaded=function(e){return this.$("."+e).removeClass("service-loading")},t.prototype.serviceProviderFailed=function(e){return this.$("."+e).removeClass("service-loading").addClass("service-unavailable").attr("disabled",!0).attr("title","Error connecting. Please check whether you areblocking "+o.upcase(e)+".")},t}(i)}}),window.require.define({"views/templates/header":function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){function d(e,t){var r="",i;return r+='\r\n  <a class="header-link" href="',u=n.href,i=u||e.href,typeof i===l?i=i.call(e,{hash:{}}):i===h&&(i=c.call(e,"href",{hash:{}})),r+=p(i)+'">',u=n.title,i=u||e.title,typeof i===l?i=i.call(e,{hash:{}}):i===h&&(i=c.call(e,"title",{hash:{}})),r+=p(i)+"</a>\r\n",r}n=n||e.helpers;var s,o,u,a,f=this,l="function",c=n.helperMissing,h=void 0,p=this.escapeExpression;return u=n.items,s=u||t.items,o=n.each,a=f.program(1,d,i),a.hash={},a.fn=a,a.inverse=f.noop,s=o.call(t,s,a),s||s===0?s:""})}}),window.require.define({"views/templates/home":function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return'<div id="stats_plots" style="width:400px; height:300px;">\r\n</div>\r\n<ul id="results"></ul>\r\n<canvas id="slope" width="1000" height="1000"></canvas>\r\n\r\n\r\n\r\n'})}}),window.require.define({"views/templates/login":function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u=this;return s})}})